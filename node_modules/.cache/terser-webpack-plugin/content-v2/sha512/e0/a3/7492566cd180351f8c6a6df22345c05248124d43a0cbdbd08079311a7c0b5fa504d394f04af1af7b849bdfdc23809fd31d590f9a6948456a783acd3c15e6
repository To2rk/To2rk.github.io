{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{481:function(e,n,s){\"use strict\";s.r(n);var a=s(28),r=Object(a.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"解决lnmp使用let-s-encrypt证书更新不成功的问题\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#解决lnmp使用let-s-encrypt证书更新不成功的问题\"}},[e._v(\"#\")]),e._v(\" 解决LNMP使用Let's Encrypt证书更新不成功的问题\")]),e._v(\" \"),s(\"h2\",{attrs:{id:\"问题出现：\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题出现：\"}},[e._v(\"#\")]),e._v(\" \"),s(\"strong\",[e._v(\"问题出现：\")])]),e._v(\" \"),s(\"p\",[e._v(\"站点\"),s(\"code\",[e._v(\"cloud.920.ai\")]),e._v(\"的是NextCloud，由于站点证书到期后没有自动续订成功，因此访问\"),s(\"code\",[e._v(\"https://cloud.920.ai\")]),e._v(\"出现隐私设置错误的问题。\")]),e._v(\" \"),s(\"p\",[e._v(\"使用\"),s(\"code\",[e._v(\"lnmp ssl add\")]),e._v(\"重新添加域名证书出现错误\")]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"cloud.920.ai:Verify error:Invalid response from http://cloud.920.ai/.well-known/acme-challenge/n2dwdsh7yNds5_jxnWkFApYLEwQW1tQW1wU4CXGOzHk\")])]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"Please check log file for more details: /usr/local/acme.sh/acme.sh.log\")])]),e._v(\" \"),s(\"h2\",{attrs:{id:\"问题解决：\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#问题解决：\"}},[e._v(\"#\")]),e._v(\" \"),s(\"strong\",[e._v(\"问题解决：\")])]),e._v(\" \"),s(\"p\",[e._v(\"编辑 \"),s(\"code\",[e._v(\"/usr/local/nginx/conf/vhost/cloud.920.ai.conf\")]),e._v(\"文件，往server段加上下面代码，保存再重启nginx\")]),e._v(\" \"),s(\"div\",{staticClass:\"language-nginx line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-nginx\"}},[s(\"code\",[e._v(\"    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"location\")]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"~\")]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"/\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\".\")]),e._v(\"well\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"-\")]),e._v(\"known \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"{\")]),e._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[e._v(\"allow\")]),e._v(\" all\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\";\")]),e._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"}\")]),e._v(\"\\n\")])]),e._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[e._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[e._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[e._v(\"3\")]),s(\"br\")])]),s(\"p\",[e._v(\"如果重启nginx的过程中出现与下面类似的错误\")]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"Stoping nginx... nginx: [emerg] BIO_new_file(\\\"/usr/local/nginx/conf/ssl/cloud.920.ai/fullchain.cer\\\") failed (SSL: error:02001002:system library:fopen:No such file or directory:fopen('/usr/local/nginx/conf/ssl/cloud.920.ai/fullchain.cer','r') error:2006D080:BIO routines:BIO_new_file:no such file)\")])]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"failed. Use force-quit\")])]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"Terminating nginx... done\")])]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"Starting nginx... nginx: [emerg] BIO_new_file(\\\"/usr/local/nginx/conf/ssl/cloud.920.ai/fullchain.cer\\\") failed (SSL: error:02001002:system library:fopen:No such file or directory:fopen('/usr/local/nginx/conf/ssl/cloud.920.ai/fullchain.cer','r') error:2006D080:BIO routines:BIO_new_file:no such file)\")])]),e._v(\" \"),s(\"p\",[s(\"code\",[e._v(\"failed\")])]),e._v(\" \"),s(\"p\",[e._v(\"先把\"),s(\"code\",[e._v(\"/usr/local/nginx/conf/vhost/cloud.920.ai.conf\")]),e._v(\"中与ssl相关的配置注释掉\")]),e._v(\" \"),s(\"p\",[e._v(\"然后再次执行\"),s(\"code\",[e._v(\"lnmp ssl add\")])]),e._v(\" \"),s(\"Vssue\",{attrs:{title:e.$title}})],1)}),[],!1,null,null,null);n.default=r.exports}}]);","extractedComments":[]}