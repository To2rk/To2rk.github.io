{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{479:function(r,t,e){\"use strict\";e.r(t);var s=e(27),a=Object(s.a)({},(function(){var r=this,t=r.$createElement,e=r._self._c||t;return e(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":r.$parent.slotKey}},[e(\"h1\",{attrs:{id:\"树莓派安装aria2结合frp实现外网域名访问\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#树莓派安装aria2结合frp实现外网域名访问\"}},[r._v(\"#\")]),r._v(\" 树莓派安装Aria2结合frp实现外网域名访问\")]),r._v(\" \"),e(\"h2\",{attrs:{id:\"_0x00-准备工作\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x00-准备工作\"}},[r._v(\"#\")]),r._v(\" \"),e(\"strong\",[r._v(\"0x00 准备工作\")])]),r._v(\" \"),e(\"ul\",[e(\"li\",[r._v(\"LNMP环境\")]),r._v(\" \"),e(\"li\",[r._v(\"已经安装好Aria2并能够正常访问，Aria2安装过程：\"),e(\"a\",{attrs:{href:\"https://nico.cc/archives/85/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[r._v(\"https://nico.cc/archives/85/\"),e(\"OutboundLink\")],1),r._v('{target=\"_blank\"}')]),r._v(\" \"),e(\"li\",[r._v(\"单端口多域名，80端口访问http，443端口访问https\")])]),r._v(\" \"),e(\"h2\",{attrs:{id:\"_0x01-frp安装及配置\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x01-frp安装及配置\"}},[r._v(\"#\")]),r._v(\" \"),e(\"strong\",[r._v(\"0x01 frp安装及配置\")])]),r._v(\" \"),e(\"ul\",[e(\"li\",[r._v(\"frp官网地址：\"),e(\"a\",{attrs:{href:\"https://github.com/fatedier/frp/releases\",target:\"_blank\",rel:\"noopener noreferrer\"}},[r._v(\"https://github.com/fatedier/frp/releases\"),e(\"OutboundLink\")],1),r._v('{target=\"_blank\"}')]),r._v(\" \"),e(\"li\",[r._v(\"服务器上不需要安装LNMP环境\")])]),r._v(\" \"),e(\"h3\",{attrs:{id:\"服务器安装frps及配置\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#服务器安装frps及配置\"}},[r._v(\"#\")]),r._v(\" \"),e(\"strong\",[r._v(\"服务器安装frps及配置\")])]),r._v(\" \"),e(\"p\",[r._v(\"我的安装路径\"),e(\"code\",[r._v(\"/opt/frps/\")]),r._v(\"以下是我的两个frps的配置，需要运行两个frps进程，一个用来转发\"),e(\"code\",[r._v(\"80端口\")]),r._v(\"，另一个用来转发\"),e(\"code\",[r._v(\"aria2 RPC 地址端口\")]),r._v(\"，端口可自定义，我的为\"),e(\"code\",[r._v(\"6800\")])]),r._v(\" \"),e(\"p\",[e(\"strong\",[r._v(\"frps_6800\")])]),r._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[r._v(\"[common]\\nbind_addr = 0.0.0.0\\nbind_port = 7001\\nauth_token = 1234567\\nvhost_https_port = 6800\\nlog_file = /opt/frps/frps_6800/frps.log\\nlog_level = info\\n\")])])]),e(\"p\",[e(\"strong\",[r._v(\"frps_80\")])]),r._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[r._v(\"[common]\\nbind_addr = 0.0.0.0\\nbind_port = 7000\\nauth_token = 1234567\\nvhost_https_port = 80\\nvhost_https_port = 443\\nlog_file = /opt/frpc/frpc_80/frpc.log\\nlog_level = info\\n\")])])]),e(\"h3\",{attrs:{id:\"_2-本地安装frpc\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2-本地安装frpc\"}},[r._v(\"#\")]),r._v(\" \"),e(\"strong\",[r._v(\"2. 本地安装frpc\")])]),r._v(\" \"),e(\"ul\",[e(\"li\",[r._v(\"由于我是在树莓派上安装的，因此frpc选择的是ARM版本，根据相应环境选择相对应版本。\")])]),r._v(\" \"),e(\"p\",[r._v(\"我的安装路径\"),e(\"code\",[r._v(\"/opt/frpc/\")]),r._v(\",以下是我的两个frpc的配置\")]),r._v(\" \"),e(\"p\",[e(\"strong\",[r._v(\"frpc_6800\")])]),r._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[r._v(\"[common]\\nserver_addr = 136.45.16.84\\nserver_port = 7001\\nauth_token = 1234567\\nlog_file = /opt/frpc/frpc_6800/frpc.log\\nlog_level = info\\n\\n[web]\\ntype = http\\nlocal_port = 6800\\ncustom_domains = aria2.920.ai\\nhost_header_rewrite = aria2.920.ai\\n\")])])]),e(\"p\",[e(\"strong\",[r._v(\"frpc_80\")])]),r._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[r._v(\"[common]\\nserver_addr = 136.45.16.84\\nserver_port = 7000\\nauth_token = 1234567\\nlog_file = /opt/frpc/frpc_80/frpc.log\\nlog_level = info\\n\\n[web]\\ntype = http\\nlocal_port = 80\\ncustom_domains = aria2.920.ai\\nhost_header_rewrite = aria2.920.ai\\n\")])])]),e(\"p\",[r._v(\"注意：\")]),r._v(\" \"),e(\"ul\",[e(\"li\",[r._v(\"由于本地多个域名共用一个80端口，nginx通过http 请求中的 host 字段来确定是哪个网站，因此需要加上\"),e(\"code\",[r._v(\"host_header_rewrite\")]),r._v(\"，而 \"),e(\"code\",[r._v(\"custom_domains\")]),r._v(\"是必须的。\")])]),r._v(\" \"),e(\"h2\",{attrs:{id:\"_0x02-frp自启动\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x02-frp自启动\"}},[r._v(\"#\")]),r._v(\" \"),e(\"strong\",[r._v(\"0x02 frp自启动\")])]),r._v(\" \"),e(\"h3\",{attrs:{id:\"frps实现开机自启\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#frps实现开机自启\"}},[r._v(\"#\")]),r._v(\" \"),e(\"strong\",[r._v(\"frps实现开机自启\")])]),r._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[r._v(\"cd /etc/init.d\\ntouch frps && chmod +x frps\\nvim frps\\n\")])])]),e(\"p\",[r._v(\"其中\"),e(\"code\",[r._v(\"frps\")]),r._v(\"的内容为\")]),r._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[r._v(\"#!/bin/sh\\n### BEGIN INIT INFO\\n# Provides: frps\\n# Required-Start: $network $remote_fs $local_fs\\n# Required-Stop: $network $remote_fs $local_fs\\n# Default-Start: 2 3 4 5\\n# Default-Stop: 0 1 6\\n# Short-Description: frps\\n# Description: frp\\n### END INIT INFO\\n\\nnohup /opt/frps/frps_6800/./frps -c /opt/frps/frps_6800/./frps.ini >/dev/null 2>&1 &\\n\\nnohup /opt/frps/frps_80/./frps -c /opt/frps/frps_80/./frps.ini >/dev/null 2>&1 &\\n\\nexit 0\\n\")])])]),e(\"p\",[r._v(\"保存并设置为开机自启\")]),r._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[r._v(\"update-rc.d frps defaults\\n\")])])]),e(\"h3\",{attrs:{id:\"frpc实现开机自启\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#frpc实现开机自启\"}},[r._v(\"#\")]),r._v(\" \"),e(\"strong\",[r._v(\"frpc实现开机自启\")])]),r._v(\" \"),e(\"p\",[r._v(\"由于需要启动两个frpc进程，在利用\"),e(\"code\",[r._v(\"Systemd Service\")]),r._v(\"实现开机自启的过程中，由于[Service] 部分\"),e(\"code\",[r._v(\"Type为simple时\")]),r._v(\"，\\n\"),e(\"code\",[r._v(\"ExecStart\")]),r._v(\"后面只能跟一条命令，因此需要把启动两个frpc的命令封装成一条命令，使用shell脚本完成\")]),r._v(\" \"),e(\"p\",[r._v(\"在\"),e(\"code\",[r._v(\"/opt/frpc/\")]),r._v(\"目录下新建一个\"),e(\"code\",[r._v(\"frpc.sh\")]),r._v(\"，并赋予执行权限\")]),r._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[r._v(\"cd /opt/frpc/\\ntouch frpc.sh && chmod +x frpc.sh\\nvim frpc.sh\\n\")])])]),e(\"p\",[r._v(\"其中frpc.sh的内容为\")]),r._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[r._v(\"#!/bin/bash\\n\\n/opt/frpc/frpc_80/./frpc -c /opt/frpc/frpc_80/./frpc.ini &\\n\\n/opt/frpc/frpc_1638/./frpc -c /opt/frpc/frpc_1638/./frpc.ini\\n\")])])]),e(\"p\",[r._v(\"然后在\"),e(\"code\",[r._v(\"/usr/lib/systemd/system/\")]),r._v(\"创建\"),e(\"code\",[r._v(\"frpc.service\")]),r._v(\",如果没有\"),e(\"code\",[r._v(\"system\")]),r._v(\"文件夹，创建一个即可\")]),r._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[r._v(\"cd /usr/lib/systemd/system/\\ntouch frpc.service\\nvim frpc.service\\n\")])])]),e(\"p\",[r._v(\"其中\"),e(\"code\",[r._v(\"frpc.service\")]),r._v(\"的内容为\")]),r._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[r._v(\"[Unit]\\nDescription=frpc\\nAfter=network.target\\n\\n[Service]\\nType=simple\\nExecStartPre=/bin/sleep 6\\nExecStart=/opt/frpc/./frpc.sh\\nExecStop=/bin/kill $MAINPID\\n\\n[Install]\\nWantedBy=multi-user.target\\n\")])])]),e(\"p\",[r._v(\"保存并设置为开机自启\")]),r._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[r._v(\"systemctl enable frpc.service\\n\")])])]),e(\"h2\",{attrs:{id:\"_0x03-参考资料\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x03-参考资料\"}},[r._v(\"#\")]),r._v(\" \"),e(\"strong\",[r._v(\"0x03 参考资料\")])]),r._v(\" \"),e(\"ul\",[e(\"li\",[r._v(\"借助 frp 随时随地访问自己的树莓派：\"),e(\"a\",{attrs:{href:\"https://segmentfault.com/a/1190000012004693\",target:\"_blank\",rel:\"noopener noreferrer\"}},[r._v(\"https://segmentfault.com/a/1190000012004693\"),e(\"OutboundLink\")],1),r._v('{target=\"_blank\"}')]),r._v(\" \"),e(\"li\",[r._v(\"设置树莓派中frp客户端开机自启：\"),e(\"a\",{attrs:{href:\"https://www.mspace.tech/web/1163/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[r._v(\"https://www.mspace.tech/web/1163/\"),e(\"OutboundLink\")],1),r._v('{target=\"_blank\"}')])]),r._v(\" \"),e(\"Vssue\",{attrs:{title:r.$title}})],1)}),[],!1,null,null,null);t.default=a.exports}}]);","extractedComments":[]}