{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{433:function(t,s,e){\"use strict\";e.r(s);var a=e(27),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[e(\"h1\",{attrs:{id:\"lnmp环境下安装nextcloud\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#lnmp环境下安装nextcloud\"}},[t._v(\"#\")]),t._v(\" LNMP环境下安装nextcloud\")]),t._v(\" \"),e(\"h2\",{attrs:{id:\"方式一：通过下载安装包安装-不推荐-，适用于网速较慢\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#方式一：通过下载安装包安装-不推荐-，适用于网速较慢\"}},[t._v(\"#\")]),t._v(\" \"),e(\"strong\",[t._v(\"方式一：通过下载安装包安装(不推荐)，适用于网速较慢\")])]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_0x00-安装环境及添加虚拟主机\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x00-安装环境及添加虚拟主机\"}},[t._v(\"#\")]),t._v(\" \"),e(\"strong\",[t._v(\"0x00 安装环境及添加虚拟主机\")])]),t._v(\" \"),e(\"ul\",[e(\"li\",[t._v(\"本博客是在LNMP环境下搭建的，LNMP安装过程和如何添加虚拟主机，这篇文章中有记录：https://nico.cc/archives/14/ 。也可以手动搭建LNMP,（Nginx,MySQL或MariaDB,PHP),PHP版本要求7.0以上。\")]),t._v(\" \"),e(\"li\",[t._v(\"例如我的虚拟主机路径：\"),e(\"code\",[t._v(\"/home/wwwroot/cloud.920.ai/\")])]),t._v(\" \"),e(\"li\",[t._v(\"解析域名\")])]),t._v(\" \"),e(\"h3\",{attrs:{id:\"_0x01-下载nextcloud并安装\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x01-下载nextcloud并安装\"}},[t._v(\"#\")]),t._v(\" \"),e(\"strong\",[t._v(\"0x01 下载nextcloud并安装\")])]),t._v(\" \"),e(\"ul\",[e(\"li\",[t._v(\"官网地址：\"),e(\"a\",{attrs:{href:\"https://nextcloud.com/install/#instructions-server\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"https://nextcloud.com/install/#instructions-server\"),e(\"OutboundLink\")],1),t._v('{target=\"_blank\"}')])]),t._v(\" \"),e(\"ol\",[e(\"li\",[e(\"p\",[t._v(\"下载并解压\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[t._v(\"wget  https://download.nextcloud.com/server/releases/nextcloud-15.0.2.zip \\nunzip nextcloud-15.0.2.zip\\n\")])])])]),t._v(\" \"),e(\"li\",[e(\"p\",[t._v(\"将解压后nextcoud文件夹下的文件移动到添加的网站目录\"),e(\"code\",[t._v(\"/home/wwwroot/cloud.920.ai/\")]),t._v(\" 下\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[t._v(\"mv nextcloud/* /home/wwwroot/cloud.920.ai/\\n\")])])])]),t._v(\" \"),e(\"li\",[e(\"p\",[t._v(\"访问域名 \"),e(\"code\",[t._v(\"cloud.youdomain.com\")]),t._v(\",如果 \"),e(\"code\",[t._v(\"出现内部服务器错误\")]),t._v(\" \"),e(\"img\",{attrs:{src:\"https://nico.cc/files/images/screenshots/nextcloud-server-error.png\",alt:\"nextcloud-server-error\"}})])])]),t._v(\" \"),e(\"ul\",[e(\"li\",[t._v(\"解决方法：在任意位置新建一个 permission.sh ,内容如下：\")])]),t._v(\" \"),e(\"div\",{staticClass:\"language- line-numbers-mode\"},[e(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[e(\"code\",[t._v(\"    #!/bin/bash\\n    ocpath='/home/wwwroot/www.youdomain.com/'\\n    htuser='www'\\n    htgroup='www'\\n    rootuser='root'\\n\\n    printf \\\"Creating possible missing Directories\\\\n\\\"\\n    mkdir -p $ocpath/data\\n    mkdir -p $ocpath/assets\\n    mkdir -p $ocpath/updater\\n\\n    printf \\\"chmod Files and Directories\\\\n\\\"\\n    find ${ocpath}/ -type f -print0 | xargs -0 chmod 0640\\n    find ${ocpath}/ -type d -print0 | xargs -0 chmod 0750\\n\\n    printf \\\"chown Directories\\\\n\\\"\\n    chown -R ${rootuser}:${htgroup} ${ocpath}/\\n    chown -R ${htuser}:${htgroup} ${ocpath}/apps/\\n    chown -R ${htuser}:${htgroup} ${ocpath}/assets/\\n    chown -R ${htuser}:${htgroup} ${ocpath}/config/\\n    chown -R ${htuser}:${htgroup} ${ocpath}/data/\\n    chown -R ${htuser}:${htgroup} ${ocpath}/themes/\\n    chown -R ${htuser}:${htgroup} ${ocpath}/updater/\\n\\n    chmod +x ${ocpath}/occ\\n\\n    printf \\\"chmod/chown .htaccess\\\\n\\\"\\n    if [ -f ${ocpath}/.htaccess ]\\n            then\\n            chmod 0644 ${ocpath}/.htaccess\\n            chown ${rootuser}:${htgroup} ${ocpath}/.htaccess\\n    fi\\n    if [ -f ${ocpath}/data/.htaccess ]\\n            then\\n            chmod 0644 ${ocpath}/data/.htaccess\\n            chown ${rootuser}:${htgroup} ${ocpath}/data/.htaccess\\n    fi\\n\")])]),t._v(\" \"),e(\"div\",{staticClass:\"line-numbers-wrapper\"},[e(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"12\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"13\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"14\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"15\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"16\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"17\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"18\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"19\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"20\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"21\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"22\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"23\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"24\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"25\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"26\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"27\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"28\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"29\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"30\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"31\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"32\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"33\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"34\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"35\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"36\")]),e(\"br\"),e(\"span\",{staticClass:\"line-number\"},[t._v(\"37\")]),e(\"br\")])]),e(\"ul\",[e(\"li\",[t._v(\"将第二行中的路径改为你的网站目录\")]),t._v(\" \"),e(\"li\",[t._v(\"执行：\"),e(\"code\",[t._v(\"sh permission.sh\")])])]),t._v(\" \"),e(\"ol\",{attrs:{start:\"4\"}},[e(\"li\",[t._v(\"再次访问 \"),e(\"code\",[t._v(\"yourdomain.com\")])])]),t._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"https://nico.cc/files/images/screenshots/nextcloud-visit-success.png\",alt:\"nextcloud-visit-success\"}})]),t._v(\" \"),e(\"ol\",{attrs:{start:\"5\"}},[e(\"li\",[t._v(\"创建管理员账号并连接数据库\")])]),t._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"https://nico.cc/files/images/screenshots/nextcloud-install-success.png\",alt:\"nextcloud-install-success\"}})]),t._v(\" \"),e(\"ul\",[e(\"li\",[e(\"code\",[t._v(\"数据目录\")]),t._v(\"一项路径非常重要，以后挂载GoogleDrive时最好也挂载在这个目录下，否则还需要设置权限和用户组\")]),t._v(\" \"),e(\"li\",[t._v(\"数据库选择 MySQL/MariaDB  填入创建虚拟主机的数据库及密码\")]),t._v(\" \"),e(\"li\",[t._v(\"点击 \"),e(\"code\",[t._v(\"安装完成\")]),t._v(\" 后要稍等一会 ，就进入了文件管理了。\")])]),t._v(\" \"),e(\"h2\",{attrs:{id:\"方式二：通过网页安装-推荐-，，适用于网速较快\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#方式二：通过网页安装-推荐-，，适用于网速较快\"}},[t._v(\"#\")]),t._v(\" \"),e(\"strong\",[t._v(\"方式二：通过网页安装(推荐)，，适用于网速较快\")])]),t._v(\" \"),e(\"h2\",{attrs:{id:\"_0x00-安装环境及添加虚拟主机-2\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x00-安装环境及添加虚拟主机-2\"}},[t._v(\"#\")]),t._v(\" \"),e(\"strong\",[t._v(\"0x00 安装环境及添加虚拟主机\")])]),t._v(\" \"),e(\"ul\",[e(\"li\",[e(\"code\",[t._v(\"方法同方式一\")])])]),t._v(\" \"),e(\"h4\",{attrs:{id:\"_0x01-下载nextcloud并安装-2\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x01-下载nextcloud并安装-2\"}},[t._v(\"#\")]),t._v(\" \"),e(\"strong\",[t._v(\"0x01 下载nextcloud并安装\")])]),t._v(\" \"),e(\"ol\",[e(\"li\",[e(\"p\",[t._v(\"下载php文件\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[t._v(\"wget https://download.nextcloud.com/server/installer/setup-nextcloud.php\\n\")])])])]),t._v(\" \"),e(\"li\",[e(\"p\",[t._v(\"移动\"),e(\"code\",[t._v(\"setup-nextcloud.php\")]),t._v(\" 到网站目录下\")]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[t._v(\"mv setup-nextcoud.php /home/wwwroot/cloud.920.ai/\\n\")])])])]),t._v(\" \"),e(\"li\",[e(\"p\",[t._v(\"访问网站 \"),e(\"code\",[t._v(\"https://cloud.domain.com/setup-nextcloud.php\")]),t._v(\" ，点击 \"),e(\"code\",[t._v(\"Next\")])])])]),t._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"https://nico.cc/files/images/screenshots/nextcloud-web-install-visit.png\",alt:\" nextcloud-web-install-visit\"}})]),t._v(\" \"),e(\"ol\",{attrs:{start:\"4\"}},[e(\"li\",[t._v(\"安装在当前目录下，填  \"),e(\"code\",[t._v(\".\")])])]),t._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"https://nico.cc/files/images/screenshots/nextcloud-install-current-directory.png\",alt:\" nextcloud-install-current-directory\"}})]),t._v(\" \"),e(\"ul\",[e(\"li\",[e(\"strong\",[t._v(\"注意\")]),t._v(\"：如果出现 \"),e(\"code\",[t._v(\"502 Bad Gateway\")]),t._v(\"提示，再次刷新后没有出现\"),e(\"code\",[t._v(\"Next\")]),t._v(\",说明网速太慢，建议使用第一种方式；或者将\"),e(\"code\",[t._v(\"nextcloud-15.0.2.zip\")]),t._v(\"压缩包下载到网站根目录，改名为\"),e(\"code\",[t._v(\"nc.zip\")]),t._v(\"，再次访问\"),e(\"code\",[t._v(\"https://cloud.domain.com/setup-nextcloud.php\")])])]),t._v(\" \"),e(\"ol\",{attrs:{start:\"5\"}},[e(\"li\",[e(\"p\",[t._v(\"稍等一会儿就安装成功了,出现警告不用管，点 \"),e(\"code\",[t._v(\"Next\")])])]),t._v(\" \"),e(\"li\",[e(\"p\",[t._v(\"创建管理员并连接数据库\")])])]),t._v(\" \"),e(\"ul\",[e(\"li\",[e(\"code\",[t._v(\"与方式一相同\")])])]),t._v(\" \"),e(\"h2\",{attrs:{id:\"nextcloud首页\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#nextcloud首页\"}},[t._v(\"#\")]),t._v(\" \"),e(\"strong\",[t._v(\"nextcloud首页\")])]),t._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"https://nico.cc/files/images/screenshots/nextcloud-index.png\",alt:\" nextcloud-index\"}})]),t._v(\" \"),e(\"h2\",{attrs:{id:\"启用外部存储\"}},[e(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#启用外部存储\"}},[t._v(\"#\")]),t._v(\" \"),e(\"strong\",[t._v(\"启用外部存储\")])]),t._v(\" \"),e(\"ol\",[e(\"li\",[e(\"p\",[t._v(\"点击 \"),e(\"code\",[t._v(\"头像\")]),t._v(\" >>  \"),e(\"code\",[t._v(\"应用\")]),t._v(\"  >>   \"),e(\"code\",[t._v(\"已禁用的应用\")])])]),t._v(\" \"),e(\"li\",[e(\"p\",[t._v(\"启用    \"),e(\"code\",[t._v(\"External storage support\")])])]),t._v(\" \"),e(\"li\",[e(\"p\",[t._v(\"再点击  头像   >>  设置  >>  (左边管理项)  >>  外部存储，提示：\"),e(\"code\",[t._v(\"“smbclient” 未安装\")])])])]),t._v(\" \"),e(\"p\",[e(\"img\",{attrs:{src:\"https://nico.cc/files/images/screenshots/nextcloud-smbclient-not-installed.png\",alt:\" nextcloud-smbclient-not-installed\"}})]),t._v(\" \"),e(\"ol\",{attrs:{start:\"4\"}},[e(\"li\",[t._v(\"解决方法\")])]),t._v(\" \"),e(\"ul\",[e(\"li\",[e(\"p\",[e(\"code\",[t._v(\"CentOS的话就比较简单了\")])]),t._v(\" \"),e(\"div\",{staticClass:\"language- extra-class\"},[e(\"pre\",[e(\"code\",[t._v(\"  yum -y install libsmbclient libsmbclient-devel\\n  pecl install smbclient\\n\")])])])]),t._v(\" \"),e(\"li\",[e(\"p\",[e(\"code\",[t._v(\"Debian解决方法：https://nico.cc/archives/74/\")])])])]),t._v(\" \"),e(\"ol\",{attrs:{start:\"5\"}},[e(\"li\",[t._v(\"重启服务器reboot\")])]),t._v(\" \"),e(\"ul\",[e(\"li\",[e(\"p\",[t._v(\"可能会出现 \"),e(\"code\",[t._v(\"502 Bad Gateway\")]),t._v(\" ，稍等一会儿刷新即可。\")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);","extractedComments":[]}